<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atlas</title>

    <!--leaflet css-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />

    <style>

        body {
            margin:0;
            padding:0;
        } 
        #map {
            width: 100%;
            height: 100vh;
        }
    </style>
</head>
<body>
    <div id="map">
        <div class="leaflet - control coordinate"></div>
    </div>
</body>
</html>

<!--leaflet js-->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
<script src="points.js"></script>
<script src="polygon.js"></script>
<script src="line.js"></script>

<script>
    // Map initialisation
    var map = L.map('map').setView([1.3521, 103.8198], 12);

     /* ====================================
                TILE LAYER
    =====================================*/
    // osm layer
    var osm = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    });
    osm.addTo(map);

    // dark map
    var Carto_Darkmap = L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
	    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
	    subdomains: 'abcd',
	    maxZoom: 20
    });
    Carto_Darkmap.addTo(map)

    //google sat
    var googleSat = L.tileLayer('http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}',{
        maxZoom: 20,
        subdomains:['mt0','mt1','mt2','mt3']
    });
    // googleSat.addTo(map)

     /* ====================================
                    MARKER
    =====================================*/
    // GeoJSONMarker
    function createGeoJSONicon (feature, latlng){
        let GeoJSONicon = L.icon ({
            iconUrl: 'Marker.png',
            iconSize: [20, 20],
            fillOpacity: 0.2,
        })
        return L.marker(latlng, { icon: GeoJSONicon })
    }

    let GeoJSONlayer = {
        pointToLayer: createGeoJSONicon
    }


     /* ====================================
                GEOJSON
    =====================================*/
    var LineData = L.geoJSON(lineJson).addTo(map)
    var PointData = L.geoJSON(pointsJson, GeoJSONlayer).addTo(map)
    var PolygonData = L.geoJSON(polygonJson, {
        onEachFeature: function (feature, layer) {
            layer.bindPopup('<b>Name: </b>' + feature.properties.name)
        },
        style: {
            fillColour:'blue',
            fillOpacity: 0.2,
            color: "#c0c0c0",
        }
    }).addTo(map)

    // console.log(FirstMarker.toGeoJSON())
    /* ====================================
                LAYER CONTROL
    =====================================*/

    //Layer Controller
    var baseMaps = {
        "Base Map": osm,
        "Dark Mode": Carto_Darkmap,
        "Google Satellite": googleSat
    };

    var overlayMaps = {
        "Markers": LineData, PointData, PolygonData
    };

    var layerControl = L.control.layers(baseMaps, overlayMaps, {collapsed: true}).addTo(map);


    /* ====================================
                LEAFLET EVENTS
    =====================================*/

    map.on('mousemove', function (e) {
        document.getElementsByClassName('coordinate')[0].innerHTML = 'lat: ' + e.latlong.lat, 'lng: ' + e.latlng.lng;
        console.log('lat: ' + e.latlong.lat, 'lng: ' + e.latlng.lng)
    })




</script>



